# GenAI Collective Demo Night App

## Getting Started

### 1. Install the packages

```bash
yarn install
```

## 2. Set up environment variables

For `.env` key/value pairs, see [Vercel](https://vercel.com/genai-collective/gaico-demos/settings/environment-variables) and `.env.example`.

### 3. Start the local Docker DB

```bash
./start-database.sh
```

### 4. Push the schema and seed the local DB with "test@example.com" example account

```bash
yarn db:push:dev
yarn db:seed:dev
```

### 5. Start the development server

```bash
yarn dev
```

The local app should be available at `localhost:3000`. You can log in with "test@example.com".

## Data Ops

### Dev Data Studio

To manipulate the data and relations directly via Prisma during local development:

```bash
yarn db:studio:dev
```

### Migration

To alter the data schema (adding/removing/editing columns, changing unique/compound/primary keys, etc.), make changes in `schema.prisma` file, save, and run:

```bash
yarn migrate
```

Fixing failed migrations:
https://www.prisma.io/docs/orm/prisma-migrate/workflows/patching-and-hotfixing

### Deployment

To test a build with the **prod** database, run

```bash
yarn build && yarn start
```

Warning: This will deploy any prisma migrations generated by `yarn migrate` to prod. Carefully check generated migration.sql files in the prisma/migrations before executing this command. Do NOT run yarn build (or prisma migrate deploy) if the migration.sql file contains any operations to drop tables or significant amounts of data.
